<a href="https://github.com/nodejs/node"><img src="https://img.shields.io/badge/node.js-%23339933.svg?&style=for-the-badge&logo=node.js&logoColor=white" /></a> 	<a href="https://github.com/protocolbuffers/protobuf"><img src="https://img.shields.io/badge/buffer-%23231F20.svg?&style=for-the-badge&logo=buffer&logoColor=white" /></a> <a href="https://github.com/sidorares/node-mysql2"><img src="https://img.shields.io/badge/mysql-%234479A1.svg?&style=for-the-badge&logo=mysql&logoColor=white" /></a> <a href="https://github.com/auth0/node-jsonwebtoken"><img src="https://img.shields.io/badge/json%20web%20tokens-%23000000.svg?&style=for-the-badge&logo=json%20web%20tokens&logoColor=white" /></a> <a href="https://github.com/dustinrouillard/snowflake-id"><img src="https://img.shields.io/badge/snowflake-%2356B9EB.svg?&style=for-the-badge&logo=snowflake&logoColor=black" /></a>

## TowerDefense

### ì†Œê°œ
----------
ì´ í”„ë¡œì íŠ¸ëŠ” TCP ì†Œì¼“ í†µì‹ ê³¼ Protocol Buffers(ProtoBuf)ë¥¼ í•™ìŠµí•˜ê¸° ìœ„í•´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. <br>Node.jsì˜ net ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ íŒ¨í‚· í†µì‹ ì„ êµ¬í˜„í•˜ì˜€ìœ¼ë©°, íš¨ìœ¨ì ì¸ ë°ì´í„° ì „ì†¡ì„ ìœ„í•´ í”„ë¡œí† ì½œ ë²„í¼ë¥¼ ì±„íƒí•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì™€ì˜ íŒ¨í‚· í†µì‹ ì„ ì²˜ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.<br>

í•˜ë“œì½”ë”©ì„ ìµœì†Œí™”í•˜ê³  ìë™í™”ë¥¼ ë†’ì´ê¸° ìœ„í•´ íŒ¨í‚·ëª…ê³¼ í•¸ë“¤ëŸ¬ ì´ë¦„ì„ ë™ì¼í•˜ê²Œ ì„¤ì •í•˜ì—¬, íŒ¨í‚·ì˜ í˜ì´ë¡œë“œ ë””ì½”ë”©ë¶€í„° í•¸ë“¤ëŸ¬ ì—°ë™ê¹Œì§€ ìë™ìœ¼ë¡œ ì„¤ì •ë˜ë„ë¡ ì„¤ê³„í•˜ì˜€ìŠµë‹ˆë‹¤.<br> ë˜í•œ, ì„¸ì…˜ ê´€ë¦¬ ì¸¡ë©´ì—ì„œëŠ” ì¸ì› ìˆ˜ì— ë”°ë¼ ì„¸ì…˜ì„ ìë™ìœ¼ë¡œ ì¦ì„¤ ë° ê°ì¶•í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

### í”„ë¡œì íŠ¸ ì½”ë“œ í”Œë¡œìš°
------------------------
![image](https://github.com/user-attachments/assets/4036be92-8e15-4962-8a53-2e117ff41fec)

### ì‹œì—°ì˜ìƒ
-----------------------

https://github.com/user-attachments/assets/3b3e1679-2d40-41e4-b95e-1813558eeb3f



### ì£¼ìš” ê¸°ëŠ¥
------------
- [`íŒ¨í‚· íŒŒì‹±`](https://github.com/5What-s-Our-Name/TowerDefense/blob/dev/docs/tech/packetParser.md) : í¬ê¸°ê°€ ìœ ë™ì ì¸ íŒ¨í‚·ì„ ë²„í¼ì—ì„œ ì›í™œí•˜ê²Œ íŒŒì‹±í•˜ê¸° ìœ„í•˜ì—¬ ì˜¤í”„ì…‹ ê°œë…ì„ ì´ìš© í•˜ì˜€ìŠµë‹ˆë‹¤.
- [`í•¸ë“¤ëŸ¬ í´ë” ë‚´ í•¨ìˆ˜ ìë™ íŒŒì‹± ë° ì—°ë™`](https://github.com/5What-s-Our-Name/TowerDefense/blob/dev/docs/tech/loadHandlers.md) : íŒ¨í‚· íƒ€ì…ì„ ë°”íƒ•ìœ¼ë¡œ íŒ¨í‚· ì´ë¦„ì„ ì¶”ì¶œí•˜ê³ , ê·¸ ì´ë¦„ê³¼ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ Handlers ê°ì²´ì—ì„œ ì°¾ì•„ì„œ ì—°ë™í•©ë‹ˆë‹¤.
- [`ê²Œì„ì„¸ì…˜ ìë™ ì¦ì„¤ ë° ìë™ ê°ì†Œ`](https://github.com/5What-s-Our-Name/TowerDefense/blob/dev/docs/tech/game_session.md) : ìœ ì € ì ‘ì†ì— ë”°ë¼ ê²Œì„ ì„¸ì…˜ì´ ìœ ë™ì ìœ¼ë¡œ ìƒì„± ë° ê°ì†Œí•©ë‹ˆë‹¤.
- `íšŒì›ê°€ì… ë° ë¡œê·¸ì¸`: ìœ ì €ëŠ” íšŒì›ê°€ì… í›„ ë¡œê·¸ì¸í•˜ì—¬ ê²Œì„ì— ì°¸ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `ë§¤ì¹­ ì‹œìŠ¤í…œ` : ë‹¤ë¥¸ ìœ ì €ì™€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë§¤ì¹­ ë° ëŒ€ì „ì„ ì§„í–‰í•©ë‹ˆë‹¤.
- `íƒ€ì›Œ ë°°ì¹˜ ë° ì—…ê·¸ë ˆì´ë“œ`: ê²Œì„ ë‚´ì—ì„œ íƒ€ì›Œë¥¼ êµ¬ë§¤í•  ìˆ˜ ìˆìœ¼ë©° ëœë¤í•œ ìœ„ì¹˜ì— ë°°ì¹˜ë˜ì–´ ì¬ë¯¸ìš”ì†Œë¥¼ ë”í–ˆìŠµë‹ˆë‹¤.
- `ëª¬ìŠ¤í„° ìƒì„± ë° ê³µê²©`: ëª¬ìŠ¤í„°ëŠ” ì´ 5ê°€ì§€ë¡œ ëœë¤í•˜ê²Œ ìŠ¤í°ë˜ë©°, BASEì— ë„ë‹¬ ì‹œ ì •í•´ì§„ ë°ë¯¸ì§€ë¥¼ ê°€ê²©í•©ë‹ˆë‹¤.
- `ì‹¤ì‹œê°„ ìƒíƒœ ë™ê¸°í™”`: ê²Œì„ ì§„í–‰ ìƒí™©ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ê¸°í™”ë˜ë©°, ëª¬ìŠ¤í„° ë° íƒ€ì›Œì˜ ìƒíƒœ ë³€í™”ê°€ ìˆë‹¤ë©´ ë™ê¸°í™”ë¥¼ ì¶”ê°€ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
- `ê²Œì„ ê²°ê³¼ ì²˜ë¦¬`: ê²Œì„ ì¢…ë£Œ í›„ ìŠ¹íŒ¨ ì—¬ë¶€ë¥¼ íŒ¨í‚·ìœ¼ë¡œ ì „ì†¡í•˜ê³  ì ìˆ˜ë¥¼ DBì™€ ë¹„êµí•˜ì—¬ ë†’ì„ ì‹œ ì €ì¥í•©ë‹ˆë‹¤.

### TROUBLE-SHOOTING
--------------------
- [Problem_1] [EC2 í™˜ê²½ì—ì„œ loadHandlers() ì‘ë™ ì˜¤ë¥˜](https://github.com/5What-s-Our-Name/TowerDefense/blob/dev/docs/troubleShooting/loadHandlers.md)
- [Problem_2] [í´ë¼ì´ì–¸íŠ¸ ê°’ ì¡°ì‘ ì‹œ ë¬´í•œ íƒ€ì›Œ êµ¬ë§¤ í˜„ìƒ](https://github.com/5What-s-Our-Name/TowerDefense/blob/dev/docs/troubleShooting/towerPurchase.md)
- [Problem_3] [ìœ ë ¹ / ì¢€ë¹„ ìŠ¬ë¼ì„ ìŠ¤í° í˜„ìƒ ( Nagle ì•Œê³ ë¦¬ì¦˜ )](https://github.com/5What-s-Our-Name/TowerDefense/blob/dev/docs/troubleShooting/onConnection.md)

### ê¸°ìˆ  ìŠ¤íƒ
----------------
- `Node.js`: ìë°”ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜ì˜ ëŸ°íƒ€ì„ í™˜ê²½ìœ¼ë¡œ, ì„œë²„ ì‚¬ì´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ëŠ” ë° ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
- `TCP ì†Œì¼“ í†µì‹ `: net ëª¨ë“ˆì„ í™œìš©í•˜ì—¬ TCP ì†Œì¼“ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì™€ì˜ ì‹¤ì‹œê°„ í†µì‹ ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- `Protocol Buffer`: íš¨ìœ¨ì ì¸ ë°”ì´ë„ˆë¦¬ í†µì‹ ì„ ìœ„í•´ protobufjs ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- `Buffer`: ë„¤íŠ¸ì›Œí¬ í†µì‹ ì—ì„œ ì´ì§„ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Node.jsì˜ Buffer í´ë˜ìŠ¤ë¥¼ í™œìš©í–ˆìŠµë‹ˆë‹¤.
- `MySQL ë°ì´í„°ë² ì´ìŠ¤`: mysql2/promise ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ MySQL Connection Poolì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- `bcrypt`: ë¹„ë°€ë²ˆí˜¸ í•´ì‹±ì„ í†µí•´ ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ bcrypt ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- `JWT (JSON Web Token)`: ì‚¬ìš©ì ì¸ì¦ê³¼ ì„¸ì…˜ ê´€ë¦¬ë¥¼ ìœ„í•´ jsonwebtokenì„ ì‚¬ìš©í•˜ì—¬ í† í° ê¸°ë°˜ ì¸ì¦ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- `Joi`: ì…ë ¥ ê°’ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•´ joi ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- `UUID`: ê° ì„¸ì…˜IDë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ê¸° ìœ„í•´ uuid ëª¨ë“ˆì„ í™œìš©í–ˆìŠµë‹ˆë‹¤.
- `SnowFlake`: monsterId, towerIdì˜ ê³ ìœ ë²ˆí˜¸ë¥¼ ìœ„í•˜ì—¬ SnowFlakeë¥¼ í™œìš©í•˜ì—¬ Intí˜• uuid ì»¤ìŠ¤í…€ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- `Custom Error Handle`: ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì¼ê´€ì„± ìˆê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ CustomErr í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³  í™œìš©í–ˆìŠµë‹ˆë‹¤.
- `í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬`: dotenv ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì¤‘ìš”í•œ ì„¤ì • ê°’ë“¤ì„ í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ê³  ë³´ì•ˆì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤.


### ì‹¤í–‰ ê°„ ì°¸ê³ ì‚¬í•­
#### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. (ë‚´ìš© í•˜ë‹¨ ì°¸ê³ )
```
##########SERVER##########
PORT = ì„œë²„í¬íŠ¸
HOST = ì„œë²„ì£¼ì†Œ
##########MYSQL##########
DB1_NAME = DBëª…
DB1_USER = DBê³„ì •ëª…
DB1_PASSWORD = DBíŒ¨ìŠ¤ì›Œë“œ
DB1_HOST = DBì£¼ì†Œ
DB1_PORT = DBí¬íŠ¸
##########AUTH##########
PEPPER = PEPPERVALUE
SALT = 10 // SALTê°’
SECRET_KEY = SECRETKEY
```

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- DB ì¤€ë¹„ í›„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§„í–‰
`src\mysql\migration` í´ë” ë‚´ `createSchemas.js` ì‹¤í–‰ ì‹œ DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì§„í–‰
- ë˜ëŠ” package.jsonì— ì íŒ `migrate` ì‚¬ìš© `npm run migrate`

### í´ë” êµ¬ì¡°
```
ğŸ“¦src
 â”£ ğŸ“‚assets
 â”ƒ â”£ ğŸ“œinit.js
 â”ƒ â”— ğŸ“œmonster.js
 â”£ ğŸ“‚classes
 â”ƒ â”— ğŸ“‚models
 â”ƒ â”ƒ â”£ ğŸ“œgameData_class.js
 â”ƒ â”ƒ â”£ ğŸ“œgame_class.js
 â”ƒ â”ƒ â”— ğŸ“œuser_class.js
 â”£ ğŸ“‚config
 â”ƒ â”— ğŸ“œconfig.js
 â”£ ğŸ“‚constants
 â”ƒ â”£ ğŸ“œenv.js
 â”ƒ â”£ ğŸ“œheader.js
 â”ƒ â”£ ğŸ“œinitGame.js
 â”ƒ â”— ğŸ“œsessions.js
 â”£ ğŸ“‚events
 â”ƒ â”£ ğŸ“œonConnection.js
 â”ƒ â”£ ğŸ“œonData.js
 â”ƒ â”£ ğŸ“œonEnd.js
 â”ƒ â”— ğŸ“œonError.js
 â”£ ğŸ“‚handlers
 â”ƒ â”£ ğŸ“‚game
 â”ƒ â”ƒ â”£ ğŸ“œgameEndRequest.js
 â”ƒ â”ƒ â”— ğŸ“œmatchRequest.js
 â”ƒ â”£ ğŸ“‚monster
 â”ƒ â”ƒ â”£ ğŸ“œmonsterAttackBaseRequest.js
 â”ƒ â”ƒ â”£ ğŸ“œmonsterDeathNotification.js
 â”ƒ â”ƒ â”— ğŸ“œspawnMonsterRequest.js
 â”ƒ â”£ ğŸ“‚tower
 â”ƒ â”ƒ â”£ ğŸ“œtowerAttackRequest.js
 â”ƒ â”ƒ â”— ğŸ“œtowerPurchaseRequest.js
 â”ƒ â”— ğŸ“‚user
 â”ƒ â”ƒ â”£ ğŸ“œloginRequest.js
 â”ƒ â”ƒ â”— ğŸ“œregisterRequest.js
 â”£ ğŸ“‚init
 â”ƒ â”£ ğŸ“œinitServer.js
 â”ƒ â”£ ğŸ“œloadHandlers.js
 â”ƒ â”— ğŸ“œloadProto.js
 â”£ ğŸ“‚mysql
 â”ƒ â”£ ğŸ“‚migration
 â”ƒ â”ƒ â”— ğŸ“œcreateSchemas.js
 â”ƒ â”£ ğŸ“‚sql
 â”ƒ â”ƒ â”— ğŸ“œuser_db.sql
 â”ƒ â”£ ğŸ“œcreatePool.js
 â”ƒ â”— ğŸ“œtestDataBase.js
 â”£ ğŸ“‚protobuf
 â”ƒ â”— ğŸ“œpacket.proto
 â”£ ğŸ“‚sessions
 â”ƒ â”£ ğŸ“œgame_session.js
 â”ƒ â”£ ğŸ“œsession.js
 â”ƒ â”— ğŸ“œuser_session.js
 â”£ ğŸ“‚utils
 â”ƒ â”£ ğŸ“‚error
 â”ƒ â”ƒ â”£ ğŸ“œcustomErr.js
 â”ƒ â”ƒ â”£ ğŸ“œerrCodes.js
 â”ƒ â”ƒ â”— ğŸ“œhandlerErr.js
 â”ƒ â”£ ğŸ“‚formatter
 â”ƒ â”ƒ â”£ ğŸ“œdateFormatter.js
 â”ƒ â”ƒ â”£ ğŸ“œs2cConvert.js
 â”ƒ â”ƒ â”— ğŸ“œsnakeToCamel.js
 â”ƒ â”£ ğŸ“‚function
 â”ƒ â”ƒ â”— ğŸ“‚game
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œcreate_game_session.js
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œjoin_game_session.js
 â”ƒ â”£ ğŸ“‚game
 â”ƒ â”ƒ â”£ ğŸ“œcopyInstance.js
 â”ƒ â”ƒ â”£ ğŸ“œinitHighScore.js
 â”ƒ â”ƒ â”£ ğŸ“œisLogin.js
 â”ƒ â”ƒ â”£ ğŸ“œmakeInitPath.js
 â”ƒ â”ƒ â”£ ğŸ“œmakeInitTower.js
 â”ƒ â”ƒ â”— ğŸ“œscore.js
 â”ƒ â”£ ğŸ“‚joi
 â”ƒ â”ƒ â”— ğŸ“œvalidateSignUp.js
 â”ƒ â”£ ğŸ“‚jwt
 â”ƒ â”ƒ â”£ ğŸ“œcreateToken.js
 â”ƒ â”ƒ â”— ğŸ“œdecodeToken.js
 â”ƒ â”£ ğŸ“‚parser
 â”ƒ â”ƒ â”— ğŸ“œpacketParser.js
 â”ƒ â”£ ğŸ“‚response
 â”ƒ â”ƒ â”— ğŸ“œcreateResponse.js
 â”ƒ â”£ ğŸ“‚sequence
 â”ƒ â”ƒ â”— ğŸ“œC2SSequence.js
 â”ƒ â”— ğŸ“‚util
 â”ƒ â”ƒ â”£ ğŸ“œdelay.js
 â”ƒ â”ƒ â”— ğŸ“œuuid.js
 â”— ğŸ“œserver.js
```
